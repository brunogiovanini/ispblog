---
title: Resultado da avali√ß√£o f√≠sica e diferen√ßa entre atletas no R
author: ''
date: '2022-05-31'
slug: resultados-avaliacao-fisica
categories:
  - Tutoriais em R
tags:
  - R
description: ~
image: ~
math: ~
license: ~
hidden: no
comments: yes
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<p>Quando avaliamos um grupo de atletas, precisamos saber quais as principais caracter√≠sticas de cada um(a) e as principais diferen√ßas entre eles(as). Para isso, existem algumas maneiras de processamento e visualiza√ß√£o dos dados que nos trazem essas informa√ß√µes de maneira r√°pida e intuitiva.¬†</p>
<p>Vamos dar uma olhada em algumas informa√ß√µes antropom√©tricas e de desempenho do <strong>NBA Draft Combine</strong> para avaliar os resultados e visualizar as diferen√ßas entre atletas. Para comparar os jogadores, precisamos de uma medida padronizada pelo grupo. Para esse fim usaremos o T-Score (uma vers√£o modificada do Z-Score).</p>
<div id="processando-os-dados" class="section level3">
<h3>Processando os dados</h3>
<p>Eu selecionei apenas os dados de 2013 e as seguintes vari√°veis: <strong>altura (cm)</strong>, <strong>massa (Kg)</strong>, <strong>envergadura (cm)</strong>, <strong>altura de salto (parado)</strong>, <strong>altura de salto (em movimento)</strong>, <strong>repeti√ß√µes no supino</strong>, <strong>teste de agilidade</strong> e <strong>sprint</strong>. Depois de carregar os dados no R (download aqui),¬†vamos dar uma olhada nas primeiras linhas:</p>
<pre class="r"><code>knitr::kable(head(draft,6), format = &quot;html&quot;)</code></pre>
<table>
<thead>
<tr>
<th style="text-align:left;">
Atleta
</th>
<th style="text-align:right;">
Ano
</th>
<th style="text-align:right;">
Altura
</th>
<th style="text-align:right;">
Envergadura
</th>
<th style="text-align:right;">
Massa
</th>
<th style="text-align:right;">
Supino
</th>
<th style="text-align:right;">
Agilidade
</th>
<th style="text-align:right;">
Sprint
</th>
<th style="text-align:right;">
Altura de salto (em movimento)
</th>
<th style="text-align:right;">
Altura de salto (parado)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
C.J. McCollum
</td>
<td style="text-align:right;">
2013
</td>
<td style="text-align:right;">
188.595
</td>
<td style="text-align:right;">
198.755
</td>
<td style="text-align:right;">
89.35770
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
11.02
</td>
<td style="text-align:right;">
3.32
</td>
<td style="text-align:right;">
97.79
</td>
<td style="text-align:right;">
81.28
</td>
</tr>
<tr>
<td style="text-align:left;">
Michael Carter-Williams
</td>
<td style="text-align:right;">
2013
</td>
<td style="text-align:right;">
194.945
</td>
<td style="text-align:right;">
201.295
</td>
<td style="text-align:right;">
83.46100
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
10.68
</td>
<td style="text-align:right;">
3.22
</td>
<td style="text-align:right;">
104.14
</td>
<td style="text-align:right;">
80.01
</td>
</tr>
<tr>
<td style="text-align:left;">
Steven Adams
</td>
<td style="text-align:right;">
2013
</td>
<td style="text-align:right;">
210.185
</td>
<td style="text-align:right;">
224.790
</td>
<td style="text-align:right;">
115.66605
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
11.85
</td>
<td style="text-align:right;">
3.40
</td>
<td style="text-align:right;">
83.82
</td>
<td style="text-align:right;">
72.39
</td>
</tr>
<tr>
<td style="text-align:left;">
Kelly Olynyk
</td>
<td style="text-align:right;">
2013
</td>
<td style="text-align:right;">
210.185
</td>
<td style="text-align:right;">
207.645
</td>
<td style="text-align:right;">
106.14061
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
11.42
</td>
<td style="text-align:right;">
3.59
</td>
<td style="text-align:right;">
74.93
</td>
<td style="text-align:right;">
62.23
</td>
</tr>
<tr>
<td style="text-align:left;">
Shabazz Muhammad
</td>
<td style="text-align:right;">
2013
</td>
<td style="text-align:right;">
194.945
</td>
<td style="text-align:right;">
210.820
</td>
<td style="text-align:right;">
100.69751
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
10.99
</td>
<td style="text-align:right;">
3.32
</td>
<td style="text-align:right;">
93.98
</td>
<td style="text-align:right;">
74.93
</td>
</tr>
<tr>
<td style="text-align:left;">
Dennis Schroeder
</td>
<td style="text-align:right;">
2013
</td>
<td style="text-align:right;">
185.420
</td>
<td style="text-align:right;">
202.565
</td>
<td style="text-align:right;">
74.84274
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
11.09
</td>
<td style="text-align:right;">
3.21
</td>
<td style="text-align:right;">
86.36
</td>
<td style="text-align:right;">
76.20
</td>
</tr>
</tbody>
</table>
<p>O pr√≥ximo passo agora √© normalizar essas vari√°veis para que possamos fazer compara√ß√µes entre os atletas em rela√ß√£o a m√©dia do grupo. Para fazer isso, vamos por etapas. Primeiro, vamos utilizar a fun√ß√£o <code>scale()</code> para transformar nossas vari√°veis em Z-Score (a fun√ß√£o far√° isso separadamente para cada coluna que indicarmos).</p>
<pre class="r"><code>draft[,3:10] &lt;- scale(draft[,3:10])</code></pre>
<p>Em seguida, vamos transformar esses valores em T-Scores.</p>
<pre class="r"><code>draft[,3:10] &lt;- (draft[,3:10] * 10) + 50</code></pre>
<p>Temos agora os T-Scores de cada vari√°vel para todos os atletas. O valor 50 representa a m√©dia do grupo (Z-Score = 0) e a dist√¢ncia de 10 unidades representa 1 desvio-padr√£o (DP) acima ou abaixo da m√©dia. Portanto, no T-Score, √© comum que a maior parte dos valores caiam entre 30 e 80 (at√© 3 DP).</p>
<p>Precisamos lembrar que algumas das vari√°veis selecionadas est√£o em tempo (s) e, nos nossos testes, o menor tempo indica um melhor desempenho (ao contr√°rio de outras medidas em altura ou n√∫mero de repeti√ß√µes). Portanto, para que as os T-Scores indiquem igualmente a condi√ß√£o de um desempenho ‚Äúbom‚Äù ou ‚Äúruim‚Äù, inverteremos (100 - T-Score) os valores das vari√°veis medidas em tempo. Dessa forma, temos que valores acima de 50 representam um ‚Äúdesempenho‚Äù acima da m√©dia. Vamos dar uma olhada no que temos at√© agora:</p>
<pre class="r"><code>knitr::kable(head(draft,11), format = &quot;html&quot;)</code></pre>
<table>
<thead>
<tr>
<th style="text-align:left;">
Atleta
</th>
<th style="text-align:right;">
Ano
</th>
<th style="text-align:right;">
Altura
</th>
<th style="text-align:right;">
Envergadura
</th>
<th style="text-align:right;">
Massa
</th>
<th style="text-align:right;">
Supino
</th>
<th style="text-align:right;">
Agilidade
</th>
<th style="text-align:right;">
Sprint
</th>
<th style="text-align:right;">
Altura de salto (em movimento)
</th>
<th style="text-align:right;">
Altura de salto (parado)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
C.J. McCollum
</td>
<td style="text-align:right;">
2013
</td>
<td style="text-align:right;">
41.36165
</td>
<td style="text-align:right;">
41.48777
</td>
<td style="text-align:right;">
44.61623
</td>
<td style="text-align:right;">
57.95349
</td>
<td style="text-align:right;">
54.03030
</td>
<td style="text-align:right;">
50.12216
</td>
<td style="text-align:right;">
56.43456
</td>
<td style="text-align:right;">
57.10457
</td>
</tr>
<tr>
<td style="text-align:left;">
Michael Carter-Williams
</td>
<td style="text-align:right;">
2013
</td>
<td style="text-align:right;">
48.06475
</td>
<td style="text-align:right;">
43.75770
</td>
<td style="text-align:right;">
39.09548
</td>
<td style="text-align:right;">
47.34884
</td>
<td style="text-align:right;">
59.26517
</td>
<td style="text-align:right;">
57.90963
</td>
<td style="text-align:right;">
63.38717
</td>
<td style="text-align:right;">
55.22720
</td>
</tr>
<tr>
<td style="text-align:left;">
Steven Adams
</td>
<td style="text-align:right;">
2013
</td>
<td style="text-align:right;">
64.15219
</td>
<td style="text-align:right;">
64.75453
</td>
<td style="text-align:right;">
69.24731
</td>
<td style="text-align:right;">
64.31628
</td>
<td style="text-align:right;">
41.25107
</td>
<td style="text-align:right;">
43.89218
</td>
<td style="text-align:right;">
41.13884
</td>
<td style="text-align:right;">
43.96295
</td>
</tr>
<tr>
<td style="text-align:left;">
Kelly Olynyk
</td>
<td style="text-align:right;">
2013
</td>
<td style="text-align:right;">
64.15219
</td>
<td style="text-align:right;">
49.43252
</td>
<td style="text-align:right;">
60.32916
</td>
<td style="text-align:right;">
40.98605
</td>
<td style="text-align:right;">
47.87164
</td>
<td style="text-align:right;">
29.09599
</td>
<td style="text-align:right;">
31.40520
</td>
<td style="text-align:right;">
28.94396
</td>
</tr>
<tr>
<td style="text-align:left;">
Shabazz Muhammad
</td>
<td style="text-align:right;">
2013
</td>
<td style="text-align:right;">
48.06475
</td>
<td style="text-align:right;">
52.26993
</td>
<td style="text-align:right;">
55.23308
</td>
<td style="text-align:right;">
51.59070
</td>
<td style="text-align:right;">
54.49220
</td>
<td style="text-align:right;">
50.12216
</td>
<td style="text-align:right;">
52.26300
</td>
<td style="text-align:right;">
47.71770
</td>
</tr>
<tr>
<td style="text-align:left;">
Dennis Schroeder
</td>
<td style="text-align:right;">
2013
</td>
<td style="text-align:right;">
38.01010
</td>
<td style="text-align:right;">
44.89266
</td>
<td style="text-align:right;">
31.02668
</td>
<td style="text-align:right;">
32.50232
</td>
<td style="text-align:right;">
52.95254
</td>
<td style="text-align:right;">
58.68837
</td>
<td style="text-align:right;">
43.91988
</td>
<td style="text-align:right;">
49.59508
</td>
</tr>
<tr>
<td style="text-align:left;">
Shane Larkin
</td>
<td style="text-align:right;">
2013
</td>
<td style="text-align:right;">
30.63669
</td>
<td style="text-align:right;">
24.46332
</td>
<td style="text-align:right;">
33.57472
</td>
<td style="text-align:right;">
55.83256
</td>
<td style="text-align:right;">
59.88104
</td>
<td style="text-align:right;">
68.81208
</td>
<td style="text-align:right;">
71.73029
</td>
<td style="text-align:right;">
66.49144
</td>
</tr>
<tr>
<td style="text-align:left;">
Victor Oladipo
</td>
<td style="text-align:right;">
2013
</td>
<td style="text-align:right;">
44.04289
</td>
<td style="text-align:right;">
48.29755
</td>
<td style="text-align:right;">
51.41101
</td>
<td style="text-align:right;">
62.19535
</td>
<td style="text-align:right;">
59.11120
</td>
<td style="text-align:right;">
55.57339
</td>
<td style="text-align:right;">
66.16821
</td>
<td style="text-align:right;">
60.85932
</td>
</tr>
<tr>
<td style="text-align:left;">
Tony Snell
</td>
<td style="text-align:right;">
2013
</td>
<td style="text-align:right;">
51.41630
</td>
<td style="text-align:right;">
53.40489
</td>
<td style="text-align:right;">
45.04091
</td>
<td style="text-align:right;">
45.22791
</td>
<td style="text-align:right;">
64.19210
</td>
<td style="text-align:right;">
55.57339
</td>
<td style="text-align:right;">
50.87248
</td>
<td style="text-align:right;">
49.59508
</td>
</tr>
<tr>
<td style="text-align:left;">
Gorgui Dieng
</td>
<td style="text-align:right;">
2013
</td>
<td style="text-align:right;">
61.47095
</td>
<td style="text-align:right;">
62.48460
</td>
<td style="text-align:right;">
58.63046
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Mason Plumlee
</td>
<td style="text-align:right;">
2013
</td>
<td style="text-align:right;">
65.49281
</td>
<td style="text-align:right;">
52.26993
</td>
<td style="text-align:right;">
62.02785
</td>
<td style="text-align:right;">
60.07442
</td>
<td style="text-align:right;">
56.03187
</td>
<td style="text-align:right;">
52.45840
</td>
<td style="text-align:right;">
49.48196
</td>
<td style="text-align:right;">
51.47245
</td>
</tr>
</tbody>
</table>
<p>Quase tudo pronto para plotarmos. Antes disso, precisamos colocar os dados em uma estrutura diferente. Ao inv√©s de termos uma coluna para cada vari√°vel, n√≥s ‚Äúempilharemos‚Äù essas informa√ß√µes e repetiremos as informa√ß√µes que identificam cada atleta (Atleta e Ano). O comprimento dos dados ficar√° bem mais longo mas essa estrutura nos ajudar√° na hora de plotarmos nossos gr√°ficos. Para fazer isso, utilizaremos a fun√ß√£o <code>melt()</code> do pacote <code>reshape2</code>.</p>
<pre class="r"><code>library(reshape2)

df &lt;- melt(draft, # Nossos dados at√© agora
           id.vars = c(&quot;Atleta&quot;, &quot;Ano&quot;), # Vari√°veis de identifica√ß√£o
           variable.name = &quot;Variavel&quot;, # Nome da coluna das variaveis
           value.name = &quot;TS&quot;) # Nome da coluna dos valores de cada variavel</code></pre>
</div>
<div id="visualizando-os-dados" class="section level3">
<h3>Visualizando os dados</h3>
<p>Para visualizar esses dados, utlizaremos um <a href="https://r-graph-gallery.com/web-circular-barplot-with-R-and-ggplot2.html">‚Äúgr√°fico de barras circular‚Äù</a> que cair√° muito bem aos nossos objetivos. Para construir esse tipo de gr√°fico, vamos utilizar o pacote <code>ggplot2</code> - que est√° dentro pacote <code>tidyverse</code>.</p>
<p>Vamos come√ßar a construir o gr√°fico utilizando apenas os dados de um atleta:</p>
<pre class="r"><code>library(tidyverse)

df %&gt;% filter(Atleta %in% head(x = df$Atleta, 1)) %&gt;%
  ggplot() +
  geom_col(aes(x = Variavel, y = TS, fill = TS)) +
  geom_hline(yintercept = 50, linetype = &quot;dashed&quot;)</code></pre>
<p><img src="/post/2022-05-31-resultados-avaliacao-fisica/index.pt-br_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>Ainda parece meio bagun√ßado‚Ä¶ mas j√° fizemos alguma coisa. üòÖ</p>
<p>Desenhamos uma linha pontilhada indicando o valor 50‚Ä¶ ent√£o j√° temos que este atleta est√° abaixo da m√©dia nas vari√°veis antropom√©tricas e um pouco acima da m√©dia na maioria das vari√°veis de desempenho. At√© a√≠ temos algumas informa√ß√µes. Vamos tornar esse gr√°fico circular utilizando a fun√ß√£o <code>coord_polar()</code> e exibir o nome do atleta utilizando a fun√ß√£o <code>facet_wrap()</code>.</p>
<pre class="r"><code>df %&gt;% filter(Atleta %in% head(x = df$Atleta, 1)) %&gt;%
  ggplot() +
  geom_col(aes(x = Variavel, y = TS, fill = TS)) +
  geom_hline(yintercept = 50, linetype = &quot;dashed&quot;) +
  coord_polar(clip = &quot;off&quot;) +
  facet_wrap(~Atleta)</code></pre>
<p><img src="/post/2022-05-31-resultados-avaliacao-fisica/index.pt-br_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>Estamos chegando l√°! Vamos modificar um pouco esse gr√°fico dando aten√ß√£o especial aos limites do eixo Y e as cores que indicam a magnitude to T-Score. Como sabemos que a maior parte dos valores cair√° entre 20 e 80 (3 DP), podemos definir esses valores como o limite inferior e superior do eixo, respectivamente. E voil√†.</p>
<pre class="r"><code>df %&gt;% filter(Atleta %in% head(x = df$Atleta, 1)) %&gt;%
  ggplot() +
  geom_col(aes(x = Variavel, y = TS, fill = TS), color = &quot;black&quot;) +
  geom_hline(yintercept = 50, linetype = &quot;dashed&quot;) +
  coord_polar(clip = &quot;off&quot;, start = .4) +
  scale_fill_distiller(palette = &quot;RdYlGn&quot;, direction = 1,
                       limits = c(20,80)) +
  scale_y_continuous(
    limits = c(-40, 80),
    expand = c(0, 0),
    breaks = c(20, 40, 60, 80)
  ) + 
  theme_minimal() +
  facet_grid(~Atleta) +
  theme(
    # Removendo os t√≠tulos e textos dos eixos
    axis.title = element_blank(),
    axis.ticks = element_blank(),
    axis.text.y = element_blank(),
    axis.text.x = element_text(size = 8),
    text = element_text(size = 18),
    legend.position = &quot;none&quot;,
    panel.spacing = unit(3, &quot;lines&quot;)
  )</code></pre>
<p><img src="/post/2022-05-31-resultados-avaliacao-fisica/index.pt-br_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>Agora que constru√≠mos o gr√°fico utilizando as informa√ß√µes de apenas um atleta e de suas caracter√≠sticas em rela√ß√£o ao grupo avaliado, podemos brincar com as op√ß√µes de customiza√ß√£o do <code>ggplot2</code> e plotar um grupo de atletas lado a lado. Para fazer isso, basta alterar a primeira linha do gr√°fico onde utilizamos a fun√ß√£o <code>filter()</code> para selecionar o primeiro atleta da tabela. Com essa mesma fun√ß√£o podemos selecionar um ou mais valores de diferentes colunas e exibir os atletas de um determinado grupo, por exemplo.</p>
</div>
